# 搜索细节

对于复杂的语义搜索场景，建议采用检索和重新排序（retrieve & re-rank）的流程。下图为`Wen`的搜索流程：


![搜索流程](./../images/InformationRetrieval.png)

我们首先利用大模型得到问题的关键字，然后采用`ElasticSearch`搜索对应的关键字得到相关的文档。
然后通过将相关文档和大模型的假设答案进行对比`cosine相似度`进行排序。然后根据相似度分数得到最相关的文档（详细细节可见`app.py`中的`query_question`函数）。

ElasticSearch的一个优点是可以轻松添加新文档到索引中，我们还可以将其他数据与向量一起存储。缺点是性能较慢，因为它会将查询嵌入向量与所有存储的嵌入向量进行比较。这具有线性运行时间，在大型（>100k）语料库中可能过慢。
